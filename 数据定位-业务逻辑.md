# 数据定位需求拟定

> 原始需求:
>       1.用户填写评估表格
>       2.根据表格信息进行评分
>       3.根据评分反馈相应的方案(或学校)

***

#### 前端请求数据

    $.ajax({
        type:'method',
        url: "route",
        data: {
            name:   'rose',        // 姓名
            tel:    '15988888888', // 手机号码
            jn:     2,             // 日语能力 [1=>N1 | 2=>N2 | 3=>N3 | 4=>N4 | 5=>N5及以下]
            en:     3,             // 英语能力 [1=>100以上 | 2=>90~100 | 3=>80~90 | 4=>70~80 | 5=>60~70 | 6=>60以下]
            from:   2,             // 毕业院校 [1=>985 | 2=>211 | 3=>一本 | 4=>二本 | 5=>专科/其他]
            want:   1,             // 目标院校 [1=>七帝国/东工大/一桥/东艺大 | 2=>首都圈/大阪私立名门 | 3=>地方国公立 | 4=>一般私立]
            program:1,             // 专业     [1=>文 | 2=>理 | 3=>商 | 4=>工 | 5=>美 | 6=>生 | 7=>医]
            want_program:1,        // 专业     [1=>文 | 2=>理 | 3=>商 | 4=>工 | 5=>美 | 6=>生 | 7=>医]
            gpa:    2             // GPA分数  [1=>3.5以上 | 2=>3~3.5 | 3=>2~3 | 4=>2分以下]
        },
        async: false,
        success: function (data) {
            if (data.status == 1) {
                // success...
                // 返回数据结构
                {
                    'code': 200,
                    'status': true,
                    'msg': '',
                    'plan': {['plan1'],['plan2']...}
                }
            }else{
                // error...
                // 返回数据结构
                {
                    'code': 200,
                    'status': false,
                    'msg': '失败原因',
                    'plan': null
                }
            }
        },
        dataType: 'json'
    });

#### 后端处理数据

    1.接收数据
    2.通过用户填写的内容计算出的总分数
    3.根据数据评分 获取相应的方案[或学校]
    (需要方案[或学校]与分数添加关联关系,如:东京大学->90-100,早稻田->80-90...)
    4.将接收的数据和推荐的方案 合并 并 存储
    (已有方案未来可能会做修改或删除操作,为方便未来浏览历史数据,将已推荐的方案直接存储在线索数据中.为方便数据存储,此处需要将推荐方案格式转换,如:使用json_encode()等)
    5.将推荐的方案反馈给用户

> **疑问**
>
>       1.方案(或学校)是需要重新添加,还是跟之前的数据添加关联关系即可
>       2.如果方案需要重新添加,方案需要哪些存储哪些信息(字段)
>       3.后端处理数据的第4步,存储的数据是直接放在线索池,还是需要同步推送给顾问老师
>       4.如果需要同步推送,需要拟定推送规律,如:指定类别的线索推送给相关专业的老师;推送的随机性或推送顺序等
>       5.需求方表示数据评分规则没有变动性,所以数据评分规则是否静态处理